<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELANORA - Projects</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-left">
                <h1 class="logo">ELANORA</h1>
                <span class="instance-label" id="instanceLabel">Loading...</span>
            </div>
            <nav class="nav">
                <a href="projects.html" class="nav-link active">Projects</a>
                <a href="index.html" class="nav-link">Dashboard</a>
                <a href="conflicts.html" class="nav-link">Conflicts <span class="badge">7</span></a>
                <a href="tiers.html" class="nav-link">Tier Management</a>
                <a href="export.html" class="nav-link">Export</a>
                <div class="user-menu">
                    <span>Dr. Martin</span>
                    <button class="btn-logout" onclick="logout()">Logout</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Page Header -->
            <section class="page-header">
                <div class="header-info">
                    <h2 id="labProjectsTitle">Research Projects</h2>
                    <p>Manage your research repositories and collaborations</p>
                </div>
                <div class="header-actions">
                    <button class="btn-secondary" onclick="showCreateProjectModal()">
                        ‚ûï Create New Repository
                    </button>
                    <button class="btn-primary" onclick="showJoinProjectModal()">
                        üîó Join Repository
                    </button>
                </div>
            </section>

            <!-- Lab Overview -->
            <section class="lab-overview">
                <div class="lab-stats">
                    <div class="lab-stat">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-content">
                            <h3>2</h3>
                            <p>Active Repositories</p>
                        </div>
                    </div>
                    <div class="lab-stat">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <h3>8</h3>
                            <p>Active Researchers</p>
                        </div>
                    </div>
                    <div class="lab-stat">
                        <div class="stat-icon">üìÅ</div>
                        <div class="stat-content">
                            <h3>47</h3>
                            <p>Total ELAN Files</p>
                        </div>
                    </div>
                    <div class="lab-stat">
                        <div class="stat-icon">üîÑ</div>
                        <div class="stat-content">
                            <h3>7</h3>
                            <p>Active Conflicts</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Projects Grid -->
            <section class="projects-section">
                <div class="section-header">
                    <h3>üèõÔ∏è Internal Lab Projects</h3>
                    <p>Projects owned and managed by LSFB Lab</p>
                </div>
                <div class="projects-grid">
                    <!-- LSFB Corpus Repository -->
                    <div class="project-card internal featured">
                        <div class="project-header">
                            <div class="project-title">
                                <h3>üìö LSFB Corpus</h3>
                                <span class="repo-badge internal">Internal</span>
                            </div>
                            <span class="project-status active">Active</span>
                        </div>
                        <div class="project-description">
                            <p>Main corpus for Belgian French Sign Language research with comprehensive discourse analysis</p>
                        </div>
                        <div class="project-stats">
                            <div class="stat">
                                <span class="stat-number">32</span>
                                <span class="stat-label">ELAN Files</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">5</span>
                                <span class="stat-label">Conflicts</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">6</span>
                                <span class="stat-label">Contributors</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-sm primary" onclick="openProjectFiles('lsfb-corpus')">View Files</button>
                            <button class="btn-sm secondary" onclick="openProject('lsfb-corpus')">Open Repository</button>
                            <button class="btn-sm secondary">Settings</button>
                        </div>
                        
                        <!-- File List Toggle -->
                        <div class="file-toggle">
                            <button class="btn-text" onclick="toggleFileList('lsfb-corpus')">
                                <span id="toggle-lsfb-corpus">‚ñº</span> Show Files (32 files, 5 conflicts)
                            </button>
                        </div>
                        
                        <!-- Collapsible File List -->
                        <div class="file-list" id="files-lsfb-corpus" style="display: none;">
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">session_001_discourse.eaf</div>
                                    <div class="file-meta">Last modified: 2 hours ago ‚Ä¢ Dr. Martin</div>
                                </div>
                                <div class="file-status conflict">
                                    <span class="status-badge conflict">‚ö†Ô∏è Conflict</span>
                                    <button class="btn-xs primary" onclick="resolveConflict('session_001_discourse.eaf')">Resolve</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">session_002_fluence.eaf</div>
                                    <div class="file-meta">Last modified: 1 day ago ‚Ä¢ Dr. Dubois</div>
                                </div>
                                <div class="file-status clean">
                                    <span class="status-badge clean">‚úÖ Clean</span>
                                    <button class="btn-xs secondary" onclick="openFile('session_002_fluence.eaf')">Open</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">session_003_prosody.eaf</div>
                                    <div class="file-meta">Last modified: 3 hours ago ‚Ä¢ Dr. Martin</div>
                                </div>
                                <div class="file-status conflict">
                                    <span class="status-badge conflict">‚ö†Ô∏è Conflict</span>
                                    <button class="btn-xs primary" onclick="resolveConflict('session_003_prosody.eaf')">Resolve</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">session_004_gestures.eaf</div>
                                    <div class="file-meta">Last modified: 1 week ago ‚Ä¢ Dr. Lemaire</div>
                                </div>
                                <div class="file-status clean">
                                    <span class="status-badge clean">‚úÖ Clean</span>
                                    <button class="btn-xs secondary" onclick="openFile('session_004_gestures.eaf')">Open</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">session_005_constructed_actions.eaf</div>
                                    <div class="file-meta">Last modified: 5 days ago ‚Ä¢ Dr. Dubois</div>
                                </div>
                                <div class="file-status pending">
                                    <span class="status-badge pending">üîÑ Pending Review</span>
                                    <button class="btn-xs secondary" onclick="reviewFile('session_005_constructed_actions.eaf')">Review</button>
                                </div>
                            </div>
                            
                            <div class="file-summary">
                                <button class="btn-sm secondary" onclick="showAllFiles('lsfb-corpus')">View All 32 Files</button>
                                <button class="btn-sm primary" onclick="resolveAllConflicts('lsfb-corpus')">Resolve All Conflicts (5)</button>
                            </div>
                        </div>
                    </div>

                    <!-- FRAP√© Repository -->
                    <div class="project-card internal">
                        <div class="project-header">
                            <div class="project-title">
                                <h3>üé≠ FRAP√©</h3>
                                <span class="repo-badge internal">Internal</span>
                            </div>
                            <span class="project-status active">Active</span>
                        </div>
                        <div class="project-description">
                            <p>French-language research on constructed actions and prosodic markers in LSFB</p>
                        </div>
                        <div class="project-stats">
                            <div class="stat">
                                <span class="stat-number">15</span>
                                <span class="stat-label">ELAN Files</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">2</span>
                                <span class="stat-label">Conflicts</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">4</span>
                                <span class="stat-label">Contributors</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-sm primary" onclick="openProjectFiles('frape')">View Files</button>
                            <button class="btn-sm secondary" onclick="openProject('frape')">Open Repository</button>
                            <button class="btn-sm secondary">Settings</button>
                        </div>
                        
                        <!-- File List Toggle -->
                        <div class="file-toggle">
                            <button class="btn-text" onclick="toggleFileList('frape')">
                                <span id="toggle-frape">‚ñº</span> Show Files (15 files, 2 conflicts)
                            </button>
                        </div>
                        
                        <!-- Collapsible File List -->
                        <div class="file-list" id="files-frape" style="display: none;">
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">frape_session_001.eaf</div>
                                    <div class="file-meta">Last modified: Yesterday ‚Ä¢ Dr. Lemaire</div>
                                </div>
                                <div class="file-status conflict">
                                    <span class="status-badge conflict">‚ö†Ô∏è Conflict</span>
                                    <button class="btn-xs primary" onclick="resolveConflict('frape_session_001.eaf')">Resolve</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">frape_prosody_markers.eaf</div>
                                    <div class="file-meta">Last modified: 2 days ago ‚Ä¢ Dr. Martin</div>
                                </div>
                                <div class="file-status clean">
                                    <span class="status-badge clean">‚úÖ Clean</span>
                                    <button class="btn-xs secondary" onclick="openFile('frape_prosody_markers.eaf')">Open</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-info">
                                    <div class="file-name">frape_constructed_actions.eaf</div>
                                    <div class="file-meta">Last modified: 1 week ago ‚Ä¢ Dr. Dubois</div>
                                </div>
                                <div class="file-status conflict">
                                    <span class="status-badge conflict">‚ö†Ô∏è Conflict</span>
                                    <button class="btn-xs primary" onclick="resolveConflict('frape_constructed_actions.eaf')">Resolve</button>
                                </div>
                            </div>
                            
                            <div class="file-summary">
                                <button class="btn-sm secondary" onclick="showAllFiles('frape')">View All 15 Files</button>
                                <button class="btn-sm primary" onclick="resolveAllConflicts('frape')">Resolve All Conflicts (2)</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Collaborative Projects Section -->
            <section class="projects-section">
                <div class="section-header">
                    <h3>ü§ù Collaborative Projects</h3>
                    <p>Cross-lab projects with shared access and data</p>
                </div>
                <div class="projects-grid">
                    <!-- Cross-Lab Prosody Study -->
                    <div class="project-card collaborative">
                        <div class="project-header">
                            <div class="project-title">
                                <h3>üî¨ Cross-Lab Prosody Study</h3>
                                <span class="repo-badge collaborative">Collaborative</span>
                            </div>
                            <div class="collaboration-info">
                                <span class="lab-badge">LSFB Lab</span>
                                <span class="collaboration-arrow">‚Üî</span>
                                <span class="lab-badge partner">LSFX Lab</span>
                            </div>
                        </div>
                        <div class="project-description">
                            <p>Joint research on prosodic markers in sign languages comparing LSFB and LSFX corpora</p>
                        </div>
                        <div class="project-stats">
                            <div class="stat">
                                <span class="stat-number">8</span>
                                <span class="stat-label">Shared Files</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">0</span>
                                <span class="stat-label">Conflicts</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">3</span>
                                <span class="stat-label">Both Labs</span>
                            </div>
                        </div>
                        <div class="project-meta">
                            <div class="meta-item">
                                <span class="meta-label">Last sync:</span>
                                <span class="meta-value">6 hours ago</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Your access:</span>
                                <span class="meta-value">Read/Write</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Established:</span>
                                <span class="meta-value">August 2024</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-sm primary" onclick="openProject('cross-lab-prosody')">Open Project</button>
                            <button class="btn-sm secondary">Sync Status</button>
                            <button class="btn-sm secondary">Export Data</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- External Invitations Section -->
            <section class="projects-section">
                <div class="section-header">
                    <h3>üìß External Invitations</h3>
                    <p>Collaboration requests from other research labs</p>
                </div>
                <div class="projects-grid">
                    <!-- External Repository Invitation -->
                    <div class="project-card invitation">
                        <div class="project-header">
                            <div class="project-title">
                                <h3>üèõÔ∏è Gesture-Sign Interface Study</h3>
                                <span class="repo-badge invitation">Invitation</span>
                            </div>
                            <span class="external-badge">LSFX Lab</span>
                        </div>
                        <div class="invitation-content">
                            <p class="invitation-from"><strong>Invited by:</strong> Prof. Marie Dupont (LSFX Laboratory)</p>
                            <p class="invitation-desc">Comparative study examining the interface between gestures and signs in different sign language communities</p>
                            <div class="invitation-details">
                                <div class="detail-item">
                                    <span class="detail-label">Access level:</span>
                                    <span class="detail-value">Read-only</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Duration:</span>
                                    <span class="detail-value">12 months</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Data sharing:</span>
                                    <span class="detail-value">Anonymized corpus segments</span>
                                </div>
                            </div>
                        </div>
                        <div class="invitation-actions">
                            <button class="btn-sm primary" onclick="acceptInvitation('gesture-sign-interface')">Accept Collaboration</button>
                            <button class="btn-sm secondary" onclick="reviewInvitation('gesture-sign-interface')">Review Details</button>
                            <button class="btn-sm danger" onclick="declineInvitation('gesture-sign-interface')">Decline</button>
                        </div>
                        <div class="invitation-note">
                            <p><small>‚ö†Ô∏è This will give you access to selected datasets from LSFX Lab instance under data sharing agreement</small></p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recent Activity -->
            <section class="recent-activity">
                <h3>Recent Activity</h3>
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon">üìÅ</div>
                        <div class="activity-content">
                            <p><strong>session_003_discourse.eaf</strong> uploaded to LSFB Discourse Analysis</p>
                            <span class="activity-time">2 hours ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">‚ö†Ô∏è</div>
                        <div class="activity-content">
                            <p>Conflict detected in <strong>session_001_discourse.eaf</strong></p>
                            <span class="activity-time">4 hours ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">‚úÖ</div>
                        <div class="activity-content">
                            <p>Conflict resolved in Prosodic Markers Study</p>
                            <span class="activity-time">Yesterday</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Create Project Modal -->
    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Project</h3>
                <button class="close" onclick="closeModal('createProjectModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form class="project-form">
                    <div class="form-group">
                        <label for="projectName">Project Name</label>
                        <input type="text" id="projectName" placeholder="e.g., Sign Language Prosody Study">
                    </div>
                    <div class="form-group">
                        <label for="projectDesc">Description</label>
                        <textarea id="projectDesc" rows="3" placeholder="Brief description of the research project..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="institution">Institution</label>
                        <input type="text" id="institution" placeholder="University name">
                    </div>
                    <div class="form-group">
                        <label>Annotation Standards</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" checked> Fluency markers</label>
                            <label><input type="checkbox"> Discourse markers</label>
                            <label><input type="checkbox" checked> Prosodic features</label>
                            <label><input type="checkbox"> Constructed actions</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('createProjectModal')">Cancel</button>
                <button class="btn-primary">Create Project</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function showCreateProjectModal() {
            showModal('createProjectModal');
        }
        
        function showJoinProjectModal() {
            alert('Join project with invitation code - To implement');
        }
    </script>
    
    <script src="auth.js"></script>
    <script src="script.js"></script>
</body>
</html>
